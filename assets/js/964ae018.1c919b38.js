(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[491],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return s},kt:function(){return m}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var u=n.createContext({}),o=function(e){var t=n.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=o(e.components);return n.createElement(u.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,u=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=o(a),m=l,h=d["".concat(u,".").concat(m)]||d[m]||k[m]||r;return a?n.createElement(h,i(i({ref:t},s),{},{components:a})):n.createElement(h,i({ref:t},s))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=d;var p={};for(var u in t)hasOwnProperty.call(t,u)&&(p[u]=t[u]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var o=2;o<r;o++)i[o]=a[o];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5284:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return p},contentTitle:function(){return u},metadata:function(){return o},toc:function(){return s},default:function(){return d}});var n=a(2122),l=a(9756),r=(a(7294),a(3905)),i=["components"],p={title:"API Reference"},u=void 0,o={unversionedId:"api-reference",id:"api-reference",isDocsHomePage:!1,title:"API Reference",description:"Authentication",source:"@site/docs/api-reference.md",sourceDirName:".",slug:"/api-reference",permalink:"/hasura-backend-plus/docs/api-reference",editUrl:"https://github.com/nhost/hasura-backend-plus/edit/master/docs/docs/api-reference.md",version:"current",frontMatter:{title:"API Reference"}},s=[{value:"Authentication",id:"authentication",children:[{value:"<code>/auth/register</code>",id:"authregister",children:[]},{value:"<code>/auth/login</code>",id:"authlogin",children:[]},{value:"<code>/auth/logout</code>",id:"authlogout",children:[]},{value:"<code>/auth/activate</code>",id:"authactivate",children:[]},{value:"<code>/auth/delete</code>",id:"authdelete",children:[]},{value:"<code>/auth/magic-link</code>",id:"authmagic-link",children:[]},{value:"<code>/auth/token/refresh</code>",id:"authtokenrefresh",children:[]},{value:"<code>/auth/token/revoke</code>",id:"authtokenrevoke",children:[]},{value:"<code>/auth/change-email</code>",id:"authchange-email",children:[]},{value:"<code>/auth/change-email/request</code>",id:"authchange-emailrequest",children:[]},{value:"<code>/auth/change-email/change</code>",id:"authchange-emailchange",children:[]},{value:"<code>/auth/change-password</code>",id:"authchange-password",children:[]},{value:"<code>/auth/change-password/request</code>",id:"authchange-passwordrequest",children:[]},{value:"<code>/auth/change-password/change</code>",id:"authchange-passwordchange",children:[]},{value:"<code>/auth/mfa/generate</code>",id:"authmfagenerate",children:[]},{value:"<code>/auth/mfa/enable</code>",id:"authmfaenable",children:[]},{value:"<code>/auth/mfa/disable</code>",id:"authmfadisable",children:[]},{value:"<code>/auth/mfa/totp</code>",id:"authmfatotp",children:[]},{value:"<code>/auth/jwks</code>",id:"authjwks",children:[]}]},{value:"Storage",id:"storage",children:[{value:"Upload File",id:"upload-file",children:[]},{value:"Get File",id:"get-file",children:[]},{value:"File Metadata",id:"file-metadata",children:[]},{value:"File Directory",id:"file-directory",children:[]},{value:"File Directory Metadata",id:"file-directory-metadata",children:[]}]},{value:"Service",id:"service",children:[{value:"<code>/health</code> GET",id:"health-get",children:[]}]}],k={toc:s};function d(e){var t=e.components,a=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"authentication"},"Authentication"),(0,r.kt)("h3",{id:"authregister"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/register")),(0,r.kt)("p",null,"Register user"),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"email: string (required)"),(0,r.kt)("li",{parentName:"ul"},"cookie: boolean"),(0,r.kt)("li",{parentName:"ul"},"user_data: object"),(0,r.kt)("li",{parentName:"ul"},"register_options:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"allowed_roles: string[]"),(0,r.kt)("li",{parentName:"ul"},"default_roles: string")))),(0,r.kt)("p",null,"if ",(0,r.kt)("inlineCode",{parentName:"p"},"MAGIC_LINK_ENABLED")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"false"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"password: string (",(0,r.kt)("em",{parentName:"li"},"required"),")")),(0,r.kt)("p",null,"if ",(0,r.kt)("inlineCode",{parentName:"p"},"MAGIC_LINK_ENABLED")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"password: string")),(0,r.kt)("p",null,"If a password is provided, the user will register with email and password."),(0,r.kt)("p",null,"If no password is provided, the user will register using a magic link."),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"If ",(0,r.kt)("inlineCode",{parentName:"p"},"AUTO_ACTIVATE_NEW_USERS")," the response will include values for ",(0,r.kt)("inlineCode",{parentName:"p"},"jwt_token"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"jwt_expires_in")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"refresh_tokens")," effecivly logging in the user on a sucessful registration."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jwt_token?: string"),(0,r.kt)("li",{parentName:"ul"},"jwt_expires_in?: int"),(0,r.kt)("li",{parentName:"ul"},"refresh_token?: string"),(0,r.kt)("li",{parentName:"ul"},"user:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"id: string"),(0,r.kt)("li",{parentName:"ul"},"email: string"),(0,r.kt)("li",{parentName:"ul"},"display_name?: string"),(0,r.kt)("li",{parentName:"ul"},"avatar_url?: string")))),(0,r.kt)("h3",{id:"authlogin"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/login")),(0,r.kt)("p",null,"Login user."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-1"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"email: string (required)"),(0,r.kt)("li",{parentName:"ul"},"cookie: boolean")),(0,r.kt)("p",null,"if ",(0,r.kt)("inlineCode",{parentName:"p"},"MAGIC_LINK_ENABLED")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"false"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"password: string (required)")),(0,r.kt)("p",null,"if ",(0,r.kt)("inlineCode",{parentName:"p"},"MAGIC_LINK_ENABLED")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"password: string")),(0,r.kt)("p",null,"If a password is provided, the user will login with email and password."),(0,r.kt)("p",null,"If no password is provided, the user will login using a magic link."),(0,r.kt)("h4",{id:"response-1"},"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jwt_token: string"),(0,r.kt)("li",{parentName:"ul"},"jwt_expires_in: int"),(0,r.kt)("li",{parentName:"ul"},"refresh_token: string"),(0,r.kt)("li",{parentName:"ul"},"user:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"id: string"),(0,r.kt)("li",{parentName:"ul"},"email: string"),(0,r.kt)("li",{parentName:"ul"},"display_name?: string"),(0,r.kt)("li",{parentName:"ul"},"avatar_url?: string")))),(0,r.kt)("p",null,"If the user has multi factor authentication enabled:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"mfa: true"),(0,r.kt)("li",{parentName:"ul"},"ticket: string")),(0,r.kt)("p",null,"if no ",(0,r.kt)("inlineCode",{parentName:"p"},"password")," was provided as a parameter and ",(0,r.kt)("inlineCode",{parentName:"p"},"MAGIC_LINK_ENABLED")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"magicLink: true")),(0,r.kt)("h3",{id:"authlogout"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/logout")),(0,r.kt)("p",null,"Logout user."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-2"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"all: boolean")),(0,r.kt)("p",null,"If ",(0,r.kt)("inlineCode",{parentName:"p"},"all")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," the user will be logged out on all devices by deleting all ",(0,r.kt)("inlineCode",{parentName:"p"},"refresh_token")," for the user in the database."),(0,r.kt)("h4",{id:"reponse"},"Reponse"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authactivate"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/activate")),(0,r.kt)("p",null,"Activate user account."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")),(0,r.kt)("h4",{id:"parameters-3"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ticket: string (required)")),(0,r.kt)("h4",{id:"reponse-1"},"Reponse"),(0,r.kt)("p",null,"302 redirect to ",(0,r.kt)("inlineCode",{parentName:"p"},"REDIRECT_URL_SUCCESS")),(0,r.kt)("p",null,"A refresh_token will be added as a qurey parameter to the redirect."),(0,r.kt)("h3",{id:"authdelete"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/delete")),(0,r.kt)("p",null,"For user to delete their own account."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ALLOW_USER_SELF_DELETE")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be active."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-4"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"No parameters")),(0,r.kt)("h4",{id:"reponse-2"},"Reponse"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authmagic-link"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/magic-link")),(0,r.kt)("p",null,"Log in user using Magic Link."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ALLOW_USER_SELF_DELETE")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be active."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")),(0,r.kt)("h4",{id:"parameters-5"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"token: string (required)"),(0,r.kt)("li",{parentName:"ul"},"action: ",(0,r.kt)("inlineCode",{parentName:"li"},"log-in")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"register")," (required)"),(0,r.kt)("li",{parentName:"ul"},"cookie: boolean")),(0,r.kt)("h4",{id:"reponse-3"},"Reponse"),(0,r.kt)("p",null,"302 redirect to ",(0,r.kt)("inlineCode",{parentName:"p"},"REDIRECT_URL_SUCCESS")),(0,r.kt)("p",null,"A refresh_token will be added as a qurey parameter to the redirect."),(0,r.kt)("h3",{id:"authtokenrefresh"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/token/refresh")),(0,r.kt)("p",null,"Get new tokens."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")),(0,r.kt)("h4",{id:"parameters-6"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"refresh_token (required)")),(0,r.kt)("h4",{id:"reponse-4"},"Reponse"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jwt_token?: string"),(0,r.kt)("li",{parentName:"ul"},"jwt_expires_in?: int"),(0,r.kt)("li",{parentName:"ul"},"refresh_token?: string"),(0,r.kt)("li",{parentName:"ul"},"user:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"id: string"),(0,r.kt)("li",{parentName:"ul"},"email: string"),(0,r.kt)("li",{parentName:"ul"},"display_name?: string"),(0,r.kt)("li",{parentName:"ul"},"avatar_url?: string")))),(0,r.kt)("h3",{id:"authtokenrevoke"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/token/revoke")),(0,r.kt)("p",null,"Delete all user's refresh tokens. Same as ",(0,r.kt)("inlineCode",{parentName:"p"},"/auth/logout")," with aparameter ",(0,r.kt)("inlineCode",{parentName:"p"},"all=true"),"."),(0,r.kt)("h4",{id:"parameters-7"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"No parameters")),(0,r.kt)("h4",{id:"reponse-5"},"Reponse"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authchange-email"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/change-email")),(0,r.kt)("p",null,"Change email without verifying new email."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"VERIFY_EMAILS")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-8"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"new_email: string (required)")),(0,r.kt)("h4",{id:"response-2"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authchange-emailrequest"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/change-email/request")),(0,r.kt)("p",null,"Request to change to a new email."),(0,r.kt)("p",null,"HBP will send a confirmation email to the new email. The user must click the link in the email to confirm the new email and have their email changed."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"VERIFY_EMAILS")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-9"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"new_email: string (required)")),(0,r.kt)("h4",{id:"response-3"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authchange-emailchange"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/change-email/change")),(0,r.kt)("p",null,"Change user's email to the new email that was requested using ",(0,r.kt)("inlineCode",{parentName:"p"},"/auth/change-email/request"),"."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-10"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ticket: string (required)")),(0,r.kt)("h4",{id:"response-4"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authchange-password"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/change-password")),(0,r.kt)("p",null,"Change user's password."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-11"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"old_password: string (required)"),(0,r.kt)("li",{parentName:"ul"},"new_password: string")),(0,r.kt)("h4",{id:"response-5"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authchange-passwordrequest"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/change-password/request")),(0,r.kt)("p",null,"Request to change user's password. The user will receive an email with a ticket. The ticket can be userd to change the user's password."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"LOST_PASSWORD_ENABLED")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-12"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"email: string (required)")),(0,r.kt)("h4",{id:"response-6"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authchange-passwordchange"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/change-password/change")),(0,r.kt)("p",null,"Change user's password using a tucket that was received via email sent from ",(0,r.kt)("inlineCode",{parentName:"p"},"/auth/change-password/request"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"LOST_PASSWORD_ENABLED")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-13"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ticket: string (required)"),(0,r.kt)("li",{parentName:"ul"},"new_password: string (required)")),(0,r.kt)("h4",{id:"response-7"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authmfagenerate"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/mfa/generate")),(0,r.kt)("p",null,"Generate QR code and OTP secret to be used to enable MFA for user."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"MFA_ENABLED")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-14"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"No parameters")),(0,r.kt)("h4",{id:"response-8"},"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"image_url: string"),(0,r.kt)("li",{parentName:"ul"},"otp_secret: string")),(0,r.kt)("h3",{id:"authmfaenable"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/mfa/enable")),(0,r.kt)("p",null,"Enable multi factor authentication for user."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"MFA_ENABLED")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-15"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"code: string (required)")),(0,r.kt)("h4",{id:"response-9"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authmfadisable"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/mfa/disable")),(0,r.kt)("p",null,"Disable multi factor authentication for user."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"MFA_ENABLED")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-16"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"code: string (required)")),(0,r.kt)("h4",{id:"response-10"},"Response"),(0,r.kt)("p",null,"204 - no data"),(0,r.kt)("h3",{id:"authmfatotp"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/mfa/totp")),(0,r.kt)("p",null,"Login user using MFA and TOTP."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"MFA_ENABLED")," must be ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for this route to be available."),(0,r.kt)("p",null,"Method: ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("h4",{id:"parameters-17"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ticket: string (required) - From the ",(0,r.kt)("inlineCode",{parentName:"li"},"/auth/login")," route if MFA is enabled for the user."),(0,r.kt)("li",{parentName:"ul"},"code : string (required) - From the user's password manager.")),(0,r.kt)("h4",{id:"response-11"},"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"jwt_token: string"),(0,r.kt)("li",{parentName:"ul"},"jwt_expires_in: int"),(0,r.kt)("li",{parentName:"ul"},"refresh_token: string"),(0,r.kt)("li",{parentName:"ul"},"user:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"id: string"),(0,r.kt)("li",{parentName:"ul"},"email: string"),(0,r.kt)("li",{parentName:"ul"},"display_name?: string"),(0,r.kt)("li",{parentName:"ul"},"avatar_url?: string")))),(0,r.kt)("h3",{id:"authjwks"},(0,r.kt)("inlineCode",{parentName:"h3"},"/auth/jwks")),(0,r.kt)("p",null,"No documentation. We recommend using ",(0,r.kt)("inlineCode",{parentName:"p"},"HS512")," algorithm with ",(0,r.kt)("inlineCode",{parentName:"p"},"JWT_KEY")," instead."),(0,r.kt)("h2",{id:"storage"},"Storage"),(0,r.kt)("h3",{id:"upload-file"},"Upload File"),(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST /storage/o/<path-to-file>/")),(0,r.kt)("h4",{id:"parameters-18"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"file: File")),(0,r.kt)("h4",{id:"response-12"},"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"key: string"),(0,r.kt)("li",{parentName:"ul"},"AcceptRanges: string"),(0,r.kt)("li",{parentName:"ul"},"LastModified: string"),(0,r.kt)("li",{parentName:"ul"},"ContentLength: int"),(0,r.kt)("li",{parentName:"ul"},"ETag: string"),(0,r.kt)("li",{parentName:"ul"},"ContentType: string"),(0,r.kt)("li",{parentName:"ul"},"Metadata:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"token: string")))),(0,r.kt)("h3",{id:"get-file"},"Get File"),(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /storage/o/<path-to-file>")),(0,r.kt)("h4",{id:"example"},"Example"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /storage/o/<path-to-file>?w=800&q=90")),(0,r.kt)("h4",{id:"parameters-19"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"w")),(0,r.kt)("p",null,"Specify width in pixels of the image. If no height (",(0,r.kt)("inlineCode",{parentName:"p"},"h"),") is specified, the image automatically calculates the height to keep the image's aspect ratio. The value has to be between 0 and 8192."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"h")),(0,r.kt)("p",null,"Specify the height of the image. If no width (",(0,r.kt)("inlineCode",{parentName:"p"},"w"),") is specified, the image automatically calculates the width to keep the image's aspect ratio. The value has to be between 0 and 8192."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"q")),(0,r.kt)("p",null,"Specify the quality of the image with a value between 1 (very course) to 100 (lossless or almost lossless)."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"f")),(0,r.kt)("p",null,"Specify the preferred format of the requested image."),(0,r.kt)("p",null,"This parameter can be one of the following values: ",(0,r.kt)("inlineCode",{parentName:"p"},"webp"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"png"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"jpeg"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"auto"),". When the value is ",(0,r.kt)("inlineCode",{parentName:"p"},"auto")," the image will be transformed to the ",(0,r.kt)("inlineCode",{parentName:"p"},"webp")," format if the request header explicitly accepts ",(0,r.kt)("inlineCode",{parentName:"p"},"image/webp"),", otherwise the default format will be returned."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"r")),(0,r.kt)("p",null,"Give the image rounded corners"),(0,r.kt)("p",null,"This parameter can be either an integer or ",(0,r.kt)("inlineCode",{parentName:"p"},"full")," for when the image has to be fully rounded (e.g. an avatar)."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"b")),(0,r.kt)("p",null,"Add a Gaussian blur to the image, the blur has to be between 0.3 and 1000."),(0,r.kt)("h4",{id:"response-13"},"Response"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"file")),(0,r.kt)("h3",{id:"file-metadata"},"File Metadata"),(0,r.kt)("p",null,"Get file metadata."),(0,r.kt)("h4",{id:"request-2"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /storage/m/<path-to-file>")),(0,r.kt)("h4",{id:"parameters-20"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"no parameters")),(0,r.kt)("h4",{id:"response-14"},"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"key: string"),(0,r.kt)("li",{parentName:"ul"},"AcceptRanges: string"),(0,r.kt)("li",{parentName:"ul"},"LastModified: string"),(0,r.kt)("li",{parentName:"ul"},"ContentLength: int"),(0,r.kt)("li",{parentName:"ul"},"ETag: string"),(0,r.kt)("li",{parentName:"ul"},"ContentType: string"),(0,r.kt)("li",{parentName:"ul"},"Metadata:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"token: string")))),(0,r.kt)("h3",{id:"file-directory"},"File Directory"),(0,r.kt)("p",null,"Get zip of all files in directory."),(0,r.kt)("h4",{id:"request-3"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /storage/o/<path-to-file>/")," (trailing slash)"),(0,r.kt)("h4",{id:"parameters-21"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"no parameters")),(0,r.kt)("h4",{id:"response-15"},"Response"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Zip file")),(0,r.kt)("h3",{id:"file-directory-metadata"},"File Directory Metadata"),(0,r.kt)("h4",{id:"request-4"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /storage/m/<path-to-file>/")," (trailing slash)"),(0,r.kt)("h4",{id:"parameters-22"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"no parameters")),(0,r.kt)("h4",{id:"response-16"},"Response"),(0,r.kt)("p",null,"Array of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"key: string"),(0,r.kt)("li",{parentName:"ul"},"AcceptRanges: string"),(0,r.kt)("li",{parentName:"ul"},"LastModified: string"),(0,r.kt)("li",{parentName:"ul"},"ContentLength: int"),(0,r.kt)("li",{parentName:"ul"},"ETag: string"),(0,r.kt)("li",{parentName:"ul"},"ContentType: string"),(0,r.kt)("li",{parentName:"ul"},"Metadata:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"token: string")))),(0,r.kt)("h4",{id:"request-5"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"DELETE /storage/o/<path-to-file>")),(0,r.kt)("h4",{id:"parameters-23"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"no parameters")),(0,r.kt)("h4",{id:"response-17"},"Response"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"204 No Content")),(0,r.kt)("h2",{id:"service"},"Service"),(0,r.kt)("h3",{id:"health-get"},(0,r.kt)("inlineCode",{parentName:"h3"},"/health")," GET"),(0,r.kt)("p",null,"System healh check."),(0,r.kt)("h4",{id:"parameters-24"},"Parameters"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"No parameters")),(0,r.kt)("h4",{id:"response-18"},"Response"),(0,r.kt)("p",null,"204 - No data"))}d.isMDXComponent=!0}}]);